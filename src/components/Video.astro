---
const { src, poster } = Astro.props;

let finalPoster = "";

if (typeof poster === 'object' && poster !== null && poster.src) {
  finalPoster = poster.src;
} 
else if (typeof poster === 'string') {
    if (poster.startsWith('http') || poster.startsWith('/')) {
        finalPoster = poster;
    } 
    else {
        finalPoster = `${import.meta.env.BASE_URL}/thumbnail/${poster}`;
    }
}
---

<div class="video-container my-8 rounded-xl overflow-hidden shadow-2xl border border-slate-800 bg-black">
  <video 
    controls 
    class="w-full aspect-video" 
    poster={finalPoster}
    preload="metadata"
  >
    <source src={src} type="video/mp4" />
    Your browser does not support the video tag.
  </video>
</div>